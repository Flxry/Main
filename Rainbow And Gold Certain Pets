--// Locals
local Lib = require(game:GetService("ReplicatedStorage"):WaitForChild("Framework"):WaitForChild("Library"))

local PetsList = {}
for i,v in pairs(game:GetService("ReplicatedStorage").Game.Pets:GetChildren()) do
    table.insert(PetsList, v.Name)
end

local NumberPets = {}
for i,v in pairs(PetsList) do
    table.insert(NumberPets, string.gsub(v, "%D", ""))
end

--// Settings
local Settings = {
    GoldAmount = 6,
    AutoGold = false,
    GoldenPet = nil,
    RainbowAmount = 6,
    AutoRainbow = false,
    RainbowPet = nil
}

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Flxry/Main/main/LuxtLib"))()
local Window = Library.CreateWindow("A&J Gaming", "Pet Simulator X")

local MachineTab = Window:Tab("Machines")

local GoldSection = MachineTab:Section("Gold Machine")
local RainbowSection = MachineTab:Section("Rainbow Machine")

GoldSection:Toggle("Auto Gold", Settings.AutoGold, function(isToggled)
    Settings.AutoGold = isToggled
    task.spawn(function()
        while Settings.AutoGold do
            local AfterPets = {}
            for i,v in pairs(Lib.Save.Get().Pets) do
                if v.id == Settings.GoldenPet then
                    if not (v.e) and not (Lib.Directory.Pets[v.id].rarity == "Exclusive") then
                        local PetRarity = Lib.PetCmds.Get(v.uid)

                        if not (PetRarity.g or PetRarity.r or PetRarity.dm) then
                            print(v.uid)
                            table.insert(AfterPets, v.uid)
                        end
                    end
                end
            end

            for i,v in pairs(AfterPets) do
                if (#v >= Settings.GoldAmount) then
                    local PetsToGold = {}
                    for i2,v2 in pairs(AfterPets) do
                        if not (#PetsToGold == (Settings.GoldAmount)) then
                            table.insert(PetsToGold, v2)
                        else
                            break
                        end
                        Lib.Network.Invoke("use golden machine", PetsToGold)
                        wait(1.5)
                        break
                    end
                end
            end
            task.wait()
        end
    end)
end)

GoldSection:DropDown("Choose Amount", {1,2,3,4}, function(value)
    Settings.GoldAmount = value
end)

GoldSection:DropDown("Choose Pet To Gold", PetsList, function(value)
    Settings.GoldenPet = string.gsub(value, "%D", "")
end)

RainbowSection:Toggle("Auto Rainbow", Settings.AutoRainbow, function(isToggled)
    Settings.AutoRainbow = isToggled
    task.spawn(function()
        while Settings.AutoRainbow do
            local AfterPets = {}
            for i,v in pairs(Lib.Save.Get().Pets) do
                if v.id == Settings.RainbowPet then
                    if not (v.e) and not (Lib.Directory.Pets[v.id].rarity == "Exclusive") then
                        local PetRarity = Lib.PetCmds.Get(v.uid)

                        if PetRarity.g then
                            print(v.uid)
                            table.insert(AfterPets, v.uid)
                        end
                    end
                end
            end

            for i,v in pairs(AfterPets) do
                if (#v >= Settings.RainbowAmount) then
                    local PetsToRainbow = {}
                    for i2,v2 in pairs(AfterPets) do
                        if not (#PetsToRainbow == (Settings.RainbowAmount)) then
                            table.insert(PetsToRainbow, v2)
                        else
                            break
                        end
                        Lib.Network.Invoke("use rainbow machine", PetsToRainbow)
                        wait(1.5)
                        break
                    end
                end
            end
            task.wait()
        end
    end)
end)

RainbowSection:DropDown("Choose Amount", {1,2,3,4}, function(value)
    Settings.RainbowAmount = value
end)

RainbowSection:DropDown("Choose Pet To Rainbow", PetsList, function(value)
    Settings.RainbowPet = string.gsub(value, "%D", "")
end)

local SettingsTab = Window:Tab("Settings")

local DestroySection = SettingsTab:Section("UI Settings")

DestroySection:Button("Destroy UI", function()
    DestroySection:DestroyUI()
end)
